<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Liveflux Jasmine Tests</title>
    
    <!-- Jasmine CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jasmine/5.1.1/jasmine.min.css">
    
    <!-- Jasmine Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jasmine/5.1.1/jasmine.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jasmine/5.1.1/jasmine-html.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jasmine/5.1.1/boot0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jasmine/5.1.1/boot1.min.js"></script>
</head>
<body>
    <!-- Mock liveflux namespace for testing -->
    <script>
        window.liveflux = {
            dataFluxComponent: 'data-flux-component',
            dataFluxComponentID: 'data-flux-component-id',
            dataFluxRoot: 'data-flux-root',
            __componentSubscriptions: {},
            // Mock methods that bootstrap expects
            handleActionClick: function() {},
            handleFormSubmit: function() {},
            mountPlaceholders: function() {}
        };
    </script>
    
    <!-- !!! Load in the order they are defined in script.go with debug logging !!! -->
    
    <!-- liveflux_util.js -->
    <script src="/liveflux_util.js"></script>
    <script>
        // Debug: Check if util module loaded
        console.log('After util.js:', {
            util: window.liveflux.util
        });
    </script>

    <!-- liveflux_events.js -->
    <script src="/liveflux_events.js"></script>
    <script>
        // Debug: Check if events module loaded
        console.log('After events.js:', {
            events: window.liveflux.events,
            dispatch: window.liveflux.dispatch,
            on: window.liveflux.on
        });
    </script>

    <!-- liveflux_network.js -->
    <script src="/liveflux_network.js"></script>
    <script>
        // Debug: Check if network module loaded
        console.log('After network.js:', {
            network: window.liveflux.network
        });
    </script>

    <!-- liveflux_wire.js -->
    <script src="/liveflux_wire.js"></script>
    <script>
        // Debug: Check if wire module loaded
        console.log('After wire.js:', {
            wire: window.liveflux.wire
        });
    </script>

    <!-- liveflux_mount.js -->
    <script src="/liveflux_mount.js"></script>
    <script>
        // Debug: Check if mount module loaded
        console.log('After mount.js:', {
            mount: window.liveflux.mount
        });
    </script>

    <!-- liveflux_handlers.js -->
    <script src="/liveflux_handlers.js"></script>
    <script>
        // Debug: Check if handlers module loaded
        console.log('After handlers.js:', {
            handlers: window.liveflux.handlers
        });
    </script>

    <!-- liveflux_bootstrap.js -->
    <script src="/liveflux_bootstrap.js"></script>
    <script>
        // Debug: Check if bootstrap module loaded
        console.log('After bootstrap.js:', {
            bootstrapInit: window.liveflux.bootstrapInit,
            __bootstrapInitDone: window.liveflux.__bootstrapInitDone
        });
    </script>

    <!-- liveflux_find.js -->
    <script src="/liveflux_find.js"></script>
    <script>
        // Debug: Check if find module loaded
        console.log('After find.js:', {
            find: window.liveflux.find
        });
    </script>

    <!-- liveflux_dispatch.js -->
    <script src="/liveflux_dispatch.js"></script>
    <script>
        // Debug: Check if dispatch module loaded
        console.log('After dispatch.js:', {
            dispatchTo: window.liveflux.dispatchTo,
            dispatchToAlias: window.liveflux.dispatchToAlias,
            dispatchToAliasAndId: window.liveflux.dispatchToAliasAndId
        });
    </script>
    
    <!-- Test specs -->
    <script src="/tests/find.spec.js"></script>
    <script src="/tests/events.spec.js"></script>
    <script src="/tests/dispatch.spec.js"></script>
    <script src="/tests/bootstrap.spec.js"></script>
    <script src="/tests/util.spec.js"></script>
    <!-- <script src="/tests/wire.spec.js"></script> -->
    <!-- <script src="/tests/handlers.spec.js"></script> -->
</body>
</html>
